CREATE DB JAWS /home/baguenierj/Projets/Fast_KNN_Search.mpi/wntransfertmodules/data2/INPUT
OPEN JAWS
XQUERY for $synset in //SYNSET let $id := data($synset/@id) let $def := $synset/ORIGINALDEF let $cand := $synset/CANDIDATES[@processed="MODULE"] let $orig := data($cand/@original) let $instProcessed:= ( for $insts in $synset/INSTANCES let $trans := data($insts/@translation) let $inst := $insts/INSTANCE[@original=$orig] return ( if ($inst/@original = $orig) then <INSTANCES translation="{$trans}">{$inst}</INSTANCES> else nothing ) ) return if ($cand) then <SYNSET id="{$id}">{$def}{$cand}{$instProcessed}</SYNSET> else <SYNSET id="{$id}" />